/*
 * ADC.c
 *
 *  Created on: ??þ/??þ/????
 *      Author: HP
 */
//=======================<Include>
#include "ADC.h"

//                          *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*
//--------------------------*                 Generic variables                     *-------------------------------
//                          *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*

void *(G_P_ADC_Callback)();  /*xxx TODO xxx*/

/*                                                 ============================
 *=================================================*     Function Implement    *===================================================
 *                                                 ============================
 */

//---------------------------------------<MCAL_ADC_Init Function>
void MCAL_ADC_Init (S_ADC_CFG_t* ADC_CFG)
{

	//1- Select the ADC channel
	ADMUX |= ( ADC_CFG->ADC_Channel << MUX0);
	//===============================================================================================

	//2- Select Volt Reference
	ADMUX |= ( ADC_CFG->ADC_VOLT_REF << REFS0);
	//===============================================================================================

	//3- Select Clock
	ADCSRA |=  ( ADC_CFG->ADC_CLK << ADPS0 );
	//===============================================================================================

	//4- Adjust ADC High and Low Data Register
	ADMUX |= ( 1 << ADLAR );
	//===============================================================================================

    //5- Enable ADC Peripheral
	ADCSRA |= (1 << ADEN );
	//===============================================================================================

}

//---------------------------------------<MCAL_ADC_Start_Conversion Function>
 void MCAL_ADC_Start_Conversion ()
{
	ADCSRA |= ADSC; 	/*Start Conversion*/

}

//---------------------------------------<MCAL_ADC_Get_CNV_RSLT Function>
uint16_t MCAL_ADC_Get_CNV_RSLT (uint8_t ChannelNUM)
{
	while (!Read_Bit(ADCSRA, ADIF));   /*To Ensure that ADC Finish conversion*/

	ChannelNUM = (ADCL | (ADCH << 2)); /*Get Conversion Value*/
	return ChannelNUM;

}

//===================================================================
//(_   _)( )                   ( )       ( )   ( )               ( )
//  | |  | |__    ____   ___   | |/ )     \ \_/ /  ___    _   _  | |
//  | |  |  _  \ / _  )/  _  \ | | <        \ /   /   \  ( ) ( ) | |
//  | |  | | | |( (_| || ( ) | | |\ \       | |  ( (_) ) | (_) | | |
//  (_)  (_) (_) \___ )(_) (_) (_) (_)      (_)   \___/   \___/  (_)

